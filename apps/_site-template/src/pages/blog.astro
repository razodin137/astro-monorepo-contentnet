---
import { getSiteContent } from '@my-network/api';
import Card from '@my-network/ui/Card.astro';
import BaseLayout from '@my-network/ui/BaseLayout.astro';
import '../styles/theme.css';

const posts = await getSiteContent();
const siteTitle = import.meta.env.SITE_TITLE || "Starter Theme";
---

<BaseLayout title="Blog" siteTitle={siteTitle} description="Discover the latest posts and updates.">
    <section class="section">
        <div class="section-header">
            <h2>Latest Posts</h2>
            <p>Articles and updates filtered by your site's specific tag.</p>
        </div>
        
        <div class="card-grid">
            {posts.map(post => <Card data={post} />)}
            {posts.length === 0 && (
                <div class="text-center" style="grid-column: 1 / -1; padding: 4rem;">
                    <p class="text-muted">No posts found for this site. Make sure your Ghost tag matches your package.json siteConfig.</p>
                </div>
            )}
        </div>
    </section>
</BaseLayout>
